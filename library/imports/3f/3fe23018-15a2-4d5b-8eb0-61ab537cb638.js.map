{"version":3,"sources":["../../../../../assets/src/room/assets/src/room/Timer.ts"],"names":[],"mappings":";;;;;AAAM,IAAA,kBAAkC,EAAjC,oBAAO,EAAC,sBAAQ,CAAkB;AAGzC;IAA2B,yBAAY;IADvC;QAAA,qEA0DC;QAtDW,gBAAU,GAAa,IAAI,CAAC;QAE5B,eAAS,GAAG,KAAK,CAAC;QACnB,UAAI,GAAU,CAAC,CAAC;QAChB,WAAK,GAAG,CAAC,CAAC;QACV,kBAAY,GAAW,IAAI,CAAC;QAC3B,gBAAU,GAAa,IAAI,CAAC;QAC7B,gBAAU,GAAG,KAAK,CAAC;QACnB,aAAO,GAAG,KAAK,CAAC;;IA8C3B,CAAC;IA5CU,mBAAG,GAAV;QACI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAC,GAAG,CAAC,CAAC;IACjC,CAAC;IAEO,oBAAI,GAAZ;QACI,IAAI,IAAI,CAAC,OAAO;YAAE,OAAO;QACzB,IAAI,CAAC,IAAI,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC;QAC9B,IAAI,IAAI,CAAC,YAAY,KAAK,IAAI,EAAE;YAC5B,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,YAAY,EAAE;gBAClF,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC;gBAC9B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;gBACvB,IAAI,CAAC,IAAI,EAAE,CAAC;gBACZ,IAAI,IAAI,CAAC,UAAU,EAAE;oBACjB,IAAI,CAAC,UAAU,EAAE,CAAC;iBACrB;aACJ;SACJ;QACD,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;IACzD,CAAC;IAEM,oBAAI,GAAX;QACI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC/B,CAAC;IAEM,qBAAK,GAAZ;QACI,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;IACxB,CAAC;IAEM,sBAAM,GAAb;QACI,IAAI,CAAC,OAAO,GAAG,KAAK,CAAA;IACxB,CAAC;IAEM,qBAAK,GAAZ,UAAa,IAAQ,EAAE,KAAS,EAAE,YAAqB,EAAE,UAAqB;QAAjE,qBAAA,EAAA,QAAQ;QAAE,sBAAA,EAAA,SAAS;QAC5B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,IAAI,GAAG,MAAM,CAAC;QACvC,IAAI,UAAU,EAAE;YACZ,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;SAChC;QACD,IAAI,YAAY,KAAK,SAAS,EAAE;YAC5B,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;SACpC;IACL,CAAC;IArDD;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;6CACiB;IAH3B,KAAK;QADjB,OAAO;OACK,KAAK,CAyDjB;IAAD,YAAC;CAzDD,AAyDC,CAzD0B,EAAE,CAAC,SAAS,GAyDtC;AAzDY,sBAAK","file":"","sourceRoot":"../../../../../assets/src/room","sourcesContent":["const {ccclass,property} = cc._decorator;\n\n@ccclass\nexport class Timer extends cc.Component {\n\n    @property(cc.Label)\n    private timerLabel: cc.Label = null;\n    \n    private isRunning = false;\n    public time:number = 0;\n    public order = 1;\n    public completeTime: number = null;\n    private completeCb: Function = null;\n    public isTimeOver = false;\n    public isPause = false;\n\n    public run() {\n        this.schedule(this.tick,0.1);\n    }\n\n    private tick() {\n        if (this.isPause) return;\n        this.time += 0.1 * this.order;\n        if (this.completeTime !== null) {\n            if (this.order > 0 ? this.time >= this.completeTime : this.time <= this.completeTime) {\n                this.time = this.completeTime;\n                this.isTimeOver = true;\n                this.stop();\n                if (this.completeCb) {\n                    this.completeCb();\n                }\n            }\n        }\n        this.timerLabel.string = this.time.toFixed(1) + \" s\";\n    }\n\n    public stop() {\n        this.unschedule(this.tick);\n    }\n\n    public pause() {\n        this.isPause = true;\n    }\n\n    public resume() {\n        this.isPause = false\n    }\n\n    public reset(time = 0, order = 1, completeTime?: number, completeCb?: Function) {\n        this.time = time;\n        this.order = order;\n        this.isTimeOver = false;\n        this.timerLabel.string = time + \".0 s\";\n        if (completeCb) {\n            this.completeCb = completeCb;\n        }\n        if (completeTime !== undefined) {\n            this.completeTime = completeTime;\n        }\n    }\n}"]}